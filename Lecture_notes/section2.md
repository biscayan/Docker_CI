# Section2. 기본적인 도커 클라이언트 명령어 알아보기
## 컨테이너들 나열하기
- 현재 실행중인 컨테이너 나열 : $docker ps  
- 원하는 항목만 보기 : $docker ps --format 'table{{.Names}} \t table{{.Image}}'  
- 모든 컨테이너 나열 : $docker ps -a  
### 이미지 설명
1. Container ID : 컨테이너의 고유한 아이디 해쉬값, 실제로는 더 길지만 일부분만 표출됨  
2. Iamge : 컨테이너 생성 시 사용한 도커 이미지  
3. Command : 컨테이너 시작 시 실행될 명령어, 대부분 이미지에 내장되어 있으므로 별도 설정이 필요없음  
4. Created : 컨테이너가 생성된 시간
5. Status : 컨테이너의 상태 (1)실행중 -> up (2) 종료 -> exited (3) 일시정지 -> pause  
6. Ports : 컨테이너가 개방한 포트와 호스트에 연결한 포트, 특별한 설정을 하지 않은 경우에는 출력되지 않음  
7. Names : 컨테이너의 고유한 이름, 컨테이너 생성 시 --name 옵션으로 이름을 설정하지 않으면 도커 엔진이 임의로 형용사와 명사를 조합해 설정  
id와 마찬가지로 중복이 안되고 docker rename명령어로 이름을 변결할 수 있다.  
$docker rename original-name changed-name
## 도커 컨테이너의 생명주기 
도커는 생성 -> 시작 -> 실행 -> 중지 -> 삭제의 과정으로 진행이 된다.  
생성 ~ 실행은 docker run <이미지이름>으로 실행이 가능하다.  
그리고 docker run <이미지이름>은 생성 ~ 시작 부분의 docker create <이미지이름>과 socker start <시작할 컨테이너 아이디/이름>의 합으로도 볼 수 있다.  
docker start는 docker start -a 의 옵션을 줄 수가 있는데, -a(attach)의 옵션을 줘야만 명령어의 output을 화면에 표출할 수 있다.  
## Docker stop vs Docker kill
$docker stop <컨테이너 아이디/이름> : gracefully하게 작업을 중단시킨다. 즉, 그동안 하던 작업들을 자비롭게 완료하고 컨테이너를 중지시킴  
$docker kill <컨테이너 아이디/이름> : 어떠한 것도 기다리지 않고 바로 중지를 시킨다.
## 컨테이너 삭제하기
$docker rm <아이디/이름> : 중지된 컨테이너를 삭제  
$docker rm 'docker ps -a -q' : 모든 컨테이너를 삭제  
$docker rmi <이미지 id> : 이미지를 삭제  
$docker system prune : 사용하지 않는 컨테이너, 이미지, 네트워크를 모두 한번에 학제, 실행중인 컨테이너에는 영향을 주지 않음
## 실행 중인 컨테이너에 명령어 전달
$docker exec <컨테이너 아이디>  
docker run은 새로운 컨테이너를 만들어서 실행하지만,  
docker exec은 이미 실행 중인 컨테이너에 명령어를 전달한다.
## 레디스를 이용한 컨테이너 이해
(1) 레디스 서버 실행 $docker run redis  
(2) 레디스 클라이언트 실행 $redis-cli  
(3) 레디스 클라이언트에서 레디스 서버로 명령어 전달 e.g. set value1 hello  
이때, 레디스 클라이언트가 레디스 서버가 있는 컨테이너 밖에서 실행을 하려하기 때문에 에러가 발생할 것이다.  
에러를 막기 위해서는 작동중인 레디스 서버에 명령어를 전달해 줘야 한다.  
$docker exec -it <컨테이너 아이디> <명령어>  
여기서 -it는 -i(interactive)와 -t(terminal)를 합친 것으로, 명령어를 실행한 후 계속해서 명령어를 적을 수 있게 해준다.  
만약 -it를 붙이지 않는다면 명령어 하나를 실행한 후 바로 밖으로 나와버릴 것이다.
## 실행 중인 컨테이너에서 터미널 생활 즐기기
컨테이너에 명령어를 전달할 때, command를 반복해서 넣여줘야 하는 번거로움이 있다.  
쉘 환경에 접속을 한다면, 그 다음부터는 원하는 명령어만 넣어주면 된다.  
$docker exec -it <컨테이너 아이디> <명령어> sh 로 쉘 환경에 접속이 가능하다.